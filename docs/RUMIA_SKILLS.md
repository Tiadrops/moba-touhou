# ルーミア（Rumia）スキル詳細

ステージ1中ボス「宵闇の妖怪」

## 基本ステータス

| ステータス | 値 |
|-----------|-----|
| HP | 8000 |
| ATK | 25 |
| DEF | 50 (約33%ダメージ軽減) |
| 移動速度 | 120 px/s |
| ヒットボックス半径 | 40 px |

---

## Qスキル「月符・ムーンライトレイ」

プレイヤー方向に向けて7way弾を発射する基本攻撃スキル。

### パラメータ

| 項目 | 値 |
|------|-----|
| 詠唱時間 | 350ms (7way × 50ms) |
| クールダウン | 4000ms |
| 基礎ダメージ | 30 |
| ATK係数 | 0.5 (ATK × 50%) |

### 弾幕パラメータ

| 項目 | 値 |
|------|-----|
| way数 | 7 |
| 角度範囲 | ±30度 |
| 各wayの弾数 | 10発 |
| 弾の発射間隔 | 50ms |
| 弾速 | 550 px/s (10m/s) |
| 弾タイプ | KSHOT.MEDIUM_BALL.MAGENTA |
| 弾のサイズ | 512x512 px |
| 当たり判定半径 | 220 px |
| 予告線の長さ | 600 px |
| way間の遅延 | 50ms |

### 挙動

1. **詠唱フェーズ**: 左から右へ順番に予告線が表示される（50msごとに1本）
2. **発射フェーズ**: 予告線と同じ順序で弾幕が発射される
3. 各wayから10発の弾が50ms間隔で発射される

---

## Wスキル「闇符・ダークサイドオブムーン」

自機狙いレーザー1本とランダム方向レーザー4本を発射する範囲攻撃。

### パラメータ

| 項目 | 値 |
|------|-----|
| 詠唱時間 | 500ms |
| クールダウン | 4000ms |
| 基礎ダメージ | 50 |
| ATK係数 | 0.8 (ATK × 80%) |

### レーザーパラメータ

| 項目 | 値 |
|------|-----|
| レーザー総数 | 5本 |
| レーザー幅 | 30 px |
| レーザー長さ | 800 px |
| ダメージ判定時間 | 100ms |

### 挙動

1. **詠唱フェーズ**: 5本のレーザー予告線が表示される
   - 1本目: プレイヤーへの自機狙い
   - 2〜5本目: プレイヤー方向を中心に±60度（120度範囲）のランダム方向
2. **発射フェーズ**: レーザーが発射され、接触したプレイヤーにダメージ
3. ダメージは1回のスキルで1回のみ（多段ヒットなし）

### 備考

- レーザーはプレイエリア内にクリッピングされる
- 予告線はオレンジ色（0xff6600）、レーザー本体は赤色（0xff0000）

---

## Eスキル「闘符・ディマーケイション」

ルーミアを中心に拡大する円形弾幕。各波が交互に回転する東方らしい弾幕パターン。

### パラメータ

| 項目 | 値 |
|------|-----|
| 詠唱時間 | 300ms |
| クールダウン | 6000ms |
| 基礎ダメージ | 20 |
| ATK係数 | 0.3 (ATK × 30%) |

### 弾幕パラメータ

| 項目 | 値 |
|------|-----|
| 1リングあたりの弾数 | 16発 |
| 波の数 | 3波 |
| 波の発射間隔 | 400ms |
| 初期半径 | 30 px |
| 拡大速度 | 200 px/s |
| 回転速度 | 0.8 rad/s (約46度/s) |
| 弾タイプ | KSHOT.MEDIUM_BALL.MAGENTA |
| 弾のサイズ | 512x512 px |
| 当たり判定半径 | 220 px |

### 挙動

1. **詠唱フェーズ**: 詠唱完了まで待機
2. **発射フェーズ**:
   - 400ms間隔で3波の円形弾幕を発射
   - 各波は16発の弾がリング状に配置
   - 弾はルーミアを中心に拡大しながら回転
   - **偶数波（1波目、3波目）**: 時計回りに回転
   - **奇数波（2波目）**: 反時計回りに回転
3. プレイエリア外に出た弾は自動的に削除

### 備考

- 東方紅魔郷のルーミア戦「ディマーケイション」を再現
- 交互回転により弾の隙間が複雑に変化する

---

## スキル使用AI

### 優先順位

1. **Wスキル**: 最優先で使用（Qスキルが使用中でない場合）
2. **Qスキル**: Wスキルが使用中でない場合に使用
3. **Eスキル**: 他のスキルが使用中でない場合に使用

### 初期クールダウン

| スキル | スポーン後の待機時間 |
|--------|---------------------|
| Qスキル | 1000ms |
| Wスキル | 2000ms |
| Eスキル | 3000ms |

### 移動AI

- プレイエリア上部1/4の高さを目標位置として移動
- プレイヤーのX座標に緩やかに追従（速度50%）
- スキル使用中は移動停止
- 移動範囲はプレイエリア上半分に制限

---

## 設定ファイル

スキルパラメータは `src/config/GameConfig.ts` の `BOSS_CONFIG.RUMIA` で定義されています。

```typescript
BOSS_CONFIG.RUMIA.SKILL_Q  // Qスキル設定
BOSS_CONFIG.RUMIA.SKILL_W  // Wスキル設定
BOSS_CONFIG.RUMIA.SKILL_E  // Eスキル設定
```
