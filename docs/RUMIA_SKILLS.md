# ルーミア（Rumia）スキル詳細

ステージ1ボス「宵闇の妖怪」

## 基本ステータス

| ステータス | 値 |
|-----------|-----|
| HP | 5000（フェーズ0） |
| ATK | 25 |
| DEF | 50 (約33%ダメージ軽減) |
| 移動速度 | 120 px/s |
| ヒットボックス半径 | 40 px |

## アニメーション

| 状態 | 使用スプライト | フレーム数 | フレームレート |
|------|---------------|-----------|---------------|
| 待機中 | rumia_koma2.png | 4 | 1.5fps |
| 詠唱中 | rumia_koma1.png | 4 | 1.5fps |
| 移動中 | rumia_koma3.png | 2 | 4fps |

- 待機・詠唱のフレーム順: 1→3→2→4
- 移動のフレーム順: 1→2

---

## Qスキル「通常弾幕1」

プレイヤー方向に向けて予告線を順次表示し、弾幕を発射する基本攻撃スキル。
**CC（スタン）で中断可能。**

### パラメータ

| 項目 | 値 |
|------|-----|
| 詠唱時間 | 1400ms (7本 × 200ms) |
| クールダウン | 5000ms |
| 基礎ダメージ | 30 |
| ATK係数 | 0.5 (ATK × 50%) |

### 弾幕パラメータ

| 項目 | 値 |
|------|-----|
| 予告線の本数 | 7本 |
| 予告線の出現間隔 | 200ms |
| 予告線から弾発射までの遅延 | 300ms |
| 縦方向の弾数 | 10発/列 |
| 縦方向の弾間隔 | 40px |
| 横方向の弾間隔 | 30px |
| 弾速 | 1100 px/s (20m/s) |
| 弾の半径 | 13.75px (0.25m) |
| 弾タイプ | KSHOT.MEDIUM_BALL.RED |
| 表示スケール | 0.06 |

### 予告線ごとの弾数

| 予告線番号 | 横方向の列数 |
|-----------|-------------|
| 1本目 | 1列 |
| 2-3本目 | 2列 |
| 4-6本目 | 3列 |
| 7本目 | 4列 |

### 挙動

1. **詠唱フェーズ**: 200ms間隔で予告線が順次出現（各予告線はプレイヤー方向を狙う）
2. **発射フェーズ**: 各予告線の出現から300ms後に弾幕発射
3. 弾は「八の字」に広がるように角度がつく（各列が中心から3度ずつ広がる）
4. CCで中断された場合、即座にクールダウンに入る

---

## Wスキル「通常弾幕2」

ルーミアを中心に異なる速度で広がる弾幕のリングを3つ同時に生成する。

### パラメータ

| 項目 | 値 |
|------|-----|
| 詠唱時間 | 500ms |
| クールダウン | 4000ms |
| 基礎ダメージ | 50 |
| ATK係数 | 0.8 (ATK × 80%) |

### 弾幕パラメータ

| 項目 | 値 |
|------|-----|
| リング数 | 3 |
| 1リングあたりの弾数 | 20発 |
| 弾の半径 | 13.75px (0.25m) |
| 弾タイプ | KSHOT.MEDIUM_BALL.CYAN（水色） |
| 表示スケール | 0.06 |
| リング1の弾速 | 275 px/s (5m/s) |
| リング2の弾速 | 550 px/s (10m/s) |
| リング3の弾速 | 825 px/s (15m/s) |

### 挙動

1. **詠唱フェーズ**: 500msの詠唱時間
2. **発射フェーズ**: 3つのリング弾幕を同時に発射
   - 各リングは20発の弾が360度に均等配置
   - 外側のリングほど速く広がる（5m/s, 10m/s, 15m/s）
   - 発射と同時にSE（shot1.mp3）再生

### 備考

- シンプルな全方位弾幕パターン
- 速度差により徐々にリングが広がっていく視覚効果

---

## Eスキル「通常弾幕3」

ルーミアが1秒かけてランダム方向に移動しながら、2列の弾を配置して発射する。
**CC（スタン）で中断可能（ブレイク）。**

### パラメータ

| 項目 | 値 |
|------|-----|
| 詠唱時間 | 0ms（即座に移動開始） |
| クールダウン | 6000ms |
| 基礎ダメージ | 20 |
| ATK係数 | 0.3 (ATK × 30%) |

### 移動パラメータ

| 項目 | 値 |
|------|-----|
| 移動時間 | 1000ms (1秒) |
| 移動距離 | 275px (5m) |
| 移動方向 | ランダム（プレイエリア内に収まるよう調整） |

### 弾幕パラメータ

| 項目 | 値 |
|------|-----|
| 弾列数 | 2列（移動方向の前方に配置） |
| 1列あたりの弾数 | 20発 |
| 弾配置間隔 | 50ms |
| 列の間隔 | 55px (1m) |
| 弾の半径 | 13.75px (0.25m) |
| 弾タイプ | KSHOT.RINDAN.GREEN（輪弾・緑） |
| 表示スケール | 0.1 |

### 弾速パラメータ（山型）

| 弾のインデックス | 弾速 |
|----------------|------|
| 1発目 | 165 px/s (3m/s) |
| 2発目 | 192.5 px/s (3.5m/s) |
| ... | +27.5 px/s ずつ増加 |
| 11発目（ピーク） | 440 px/s (8m/s) |
| 12発目 | 412.5 px/s (7.5m/s) |
| ... | -27.5 px/s ずつ減少 |
| 20発目 | 192.5 px/s (3.5m/s) |

### 挙動

1. **発動**: 詠唱なしで即座に移動開始
2. **移動フェーズ**: 1秒かけてランダム方向に5m移動
   - 移動中は詠唱中判定（CCで中断可能）
3. **弾配置**: 移動中、50ms間隔で2列の弾を配置
   - 弾は移動方向の前方に2列配置（列の間隔1m）
   - 各弾はプレイヤー方向に発射
4. **弾速**: 山型（1発目→11発目で最速→20発目で減速）
5. CCで中断された場合、即座にクールダウンに入る（ブレイク）

### 備考

- 移動弾幕パターン
- 弾速が山型になることで、中央付近の弾が追い越し、弾の密度が変化する
- 移動方向はプレイエリア内に収まるよう自動調整される

---

## スキル使用AI

### 優先順位

1. **Wスキル**: 最優先で使用（Qスキルが使用中でない場合）
2. **Qスキル**: Wスキルが使用中でない場合に使用
3. **Eスキル**: 他のスキルが使用中でない場合に使用

### 初期クールダウン

| スキル | スポーン後の待機時間 |
|--------|---------------------|
| Qスキル | 1000ms |
| Wスキル | 2000ms |
| Eスキル | 3000ms |

### 移動AI

- プレイエリア上部1/4の高さを目標位置として移動
- プレイヤーのX座標に緩やかに追従（速度50%）
- スキル使用中は移動停止
- 移動範囲はプレイエリア上半分に制限

---

## 設定ファイル

スキルパラメータは `src/config/GameConfig.ts` の `BOSS_CONFIG.RUMIA` で定義されています。

```typescript
BOSS_CONFIG.RUMIA.SKILL_Q  // Qスキル設定
BOSS_CONFIG.RUMIA.SKILL_W  // Wスキル設定
BOSS_CONFIG.RUMIA.SKILL_E  // Eスキル設定
```
